(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3034],{1261:function(e,t,a){"use strict";a.r(t);t.default=function(e){var t,a="bg-green-600";return 0==e&&(t="w-0"),e>0&&e<10&&(t="w-3"),e>=10&&e<25&&(t="w-1/5"),e>=25&&e<50&&(t="w-1/4"),e>=50&&e<75&&(t="w-1/2"),e>=75&&e<100&&(t="w-3/4",a="bg-red-600"),100==e&&(t="w-full"),"h-full "+t+" "+a}},1081:function(e,t,a){"use strict";a.r(t);var i=a(5893),n=a(9198),r=a.n(n),s=a(381),d=a.n(s),o=a(6154),c=a(7294);t.default=function(e){var t=e.machineID,a=e.pickupDate,n=(e.setPickupDates,e.setMachineID),s=e.setPickupDate,m=(e.pickupDates,e.machinesData),f=e.areDatesConfirmed,l=e.setAreDatesConfirmed,u=e.setNewPickupDates,h=e.newPickupDates,g=e.radioConfirmed,x=e.setRadioConfirmed,p=(0,c.useState)(),y=(p[0],p[1],function(e){var a=m.filter((function(e){return e.machine_id==t}))[0],i={machine_id:a.machine_id,machineType:a.machineType,machineName:a.machineName,group:a.group,waretype:a.waretype,quality:a.quality,index:a.index,maxNetto:a.maxNetto,minContainer:a.minContainer,maxContainer:a.maxContainer,averageThroughput:a.averageThroughput,manualTara:a.manualTara,minForFullStart:a.minForFullStart,newFT111:a.newFT111,automaticTara:a.automaticTara,fillingType:a.fillingType,plandateCalculation:a.plandateCalculation,status:a.status,client:a.client,total_working_time:a.total_working_time,total_working_weight:a.total_working_weight,pickup_date:e.format("YYYY-MM-DD HH:mm"),isDateConfirmed:g,lastIndicate:a.lastIndicate,lastTara:a.lastTara},r=h.filter((function(e){return e.machine_id!=t}));r.push([{machine_id:t,date:e.format("YYYY-MM-DD HH:mm")}]),u(r.flat());var d,c=f.filter((function(e){return e.machine_id!=t}));c.push([{machine_id:t,date_confirmed:g}]),l(c.flat()),d=i,o.Z.put("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/machines",d).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),n(""),s(""),x("")});return(0,i.jsxs)("div",{id:"popup",className:""!=t?"text-sm bg-white w-1/3 sm:rounded-lg shadow-md border p-5 space-y-4 fixed -mt-64 left-0 right-0 m-auto":"hidden",children:[(0,i.jsxs)("p",{children:["Abholdatum bearbeiten (Masch.-ID: ",t,")"]}),(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("p",{className:"m-auto",children:"Abholdatum:"}),(0,i.jsx)(r(),{className:"shadow-md border text-center p-0.5",selected:a&&""!=a?d()(a).toDate():"",showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeFormat:"HH:mm",onChange:function(e){return s(d()(e))}}),(0,i.jsxs)("div",{className:"m-auto",children:["(",function(){if(a&&""!=a)return{0:"Montag",1:"Dienstag",2:"Mittwoch",3:"Donnerstag",4:"Freitag",5:"Samstag",6:"Sonntag"}[d()(a).day()]}(),")"]})]})}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"radio-1",type:"radio",value:"",name:"default-radio",checked:!(!m||0!=g),onChange:function(){x(!1)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,i.jsxs)("label",{htmlFor:"radio-1",className:"flex ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:[(0,i.jsx)("img",{src:"/icon_fragezeichen 1.svg"}),"Angefragt"]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"radio-2",type:"radio",value:"",name:"default-radio",checked:!(!m||1!=g),onChange:function(){x(!0)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,i.jsxs)("label",{htmlFor:"radio-2",className:"flex ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:[(0,i.jsx)("img",{src:"/icon_haken 1.svg"}),"Best\xe4tigt"]})]})]}),(0,i.jsxs)("div",{id:"popup-buttons",className:"space-x-5",children:[(0,i.jsx)("button",{className:"sm:rounded-lg shadow-md border p-1",onClick:function(){y(a)},children:"Speichern"}),(0,i.jsx)("button",{className:"sm:rounded-lg shadow-md border p-1",onClick:function(){n(""),s(""),x("")},children:"Abbrechen"})]})]})}},3034:function(e,t,a){"use strict";a.r(t);var i=a(828),n=a(5893),r=a(7294),s=a(1664),d=a.n(s),o=a(1261),c=a(6154),m=a(381),f=a.n(m),l=a(1081);a(8698);t.default=function(){var e=(0,r.useState)(),t=e[0],a=e[1],s=(0,r.useState)(),m=s[0],u=s[1],h=(0,r.useState)(""),g=h[0],x=h[1],p=(0,r.useState)([]),y=p[0],T=p[1],_=(0,r.useState)(""),b=_[0],v=_[1],j=(0,r.useState)([]),k=j[0],w=j[1],N=(0,r.useState)(""),D=N[0],C=N[1],S=(0,r.useState)([]),I=S[0],M=S[1],L=(0,r.useState)([]),A=L[0],Y=L[1],F=(0,r.useState)(""),H=F[0],Z=F[1];(0,r.useEffect)((function(){c.Z.get("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/machines").then((function(e){a(e.data.Items.filter((function(e){return"e-findo GmbH"==e.client})))})).catch((function(e){console.log(e)})),c.Z.get("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/shifts").then((function(e){u(e.data.Items.filter((function(e){return 1e4==e.shift_id}))[0].shifts)})).catch((function(e){console.log(e.response)}))}),[]);var P={Sunday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Monday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Tuesday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Wednesday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Thursday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Friday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Saturday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}}},E={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},B=function(e,t){for(var a=60*e,n=f()(),r=(0,i.Z)(function(e){for(var t=f()(e.format("L")),a=0;a<7;a++){var i=P[E[t.day()]];if(""!=i.shift1.start){var n=i.shift1.start,r=i.shift1.end,s=f()(t.format("L")+" "+n),d=f()(t.format("L")+" "+r);if(d.isBefore(s)&&d.add(1,"day"),d.isAfter(e))return[i.shift1,t.format("L")]}if(""!=i.shift2.start){var o=i.shift2.start,c=i.shift2.end,m=f()(t.format("L")+" "+o),l=f()(t.format("L")+" "+c);if(l.isBefore(m)&&l.add(1,"day"),l.isAfter(e))return[i.shift2,t.format("L")]}if(""!=i.shift3.start){var u=i.shift3.start,h=i.shift3.end,g=f()(t.format("L")+" "+u),x=f()(t.format("L")+" "+h);if(x.isBefore(g)&&x.add(1,"day"),x.isAfter(e))return[i.shift3,t.format("L")]}if(""!=i.shift4.start){var p=i.shift4.start,y=i.shift4.end,T=f()(t.format("L")+" "+p),_=f()(t.format("L")+" "+y);if(_.isBefore(T)&&_.add(1,"day"),_.isAfter(e))return[i.shift4,t.format("L")]}t.add(1,"day")}}(n),2),s=r[0],d=r[1],o=f()(n.format("L"));a>0;)for(var c in P)if(c==E[o.day()]){for(var m=P[E[o.day()]],l=1;l<5;l++){var u="shift"+l;if(""!=m[u].start){var h=f()(o.format("L")+" "+m[u].start),g=f()(o.format("L")+" "+m[u].end);if(g.isBefore(h)&&g.add(1,"day"),h.isAfter(f()(d+" "+s.start))&&(n=h),(n.format("LLL")==h.format("LLL")||n.isAfter(h))&&n.isBefore(g)){var x=n.clone();x.add(a,"minutes");var p=g.diff(n)/36e5*60;if(x.diff(n)/36e5*60<=p){var _=y;return _.push([{machineID:t,taskEnd:x}]),T(_.flat()),w(_.flat()),x}a-=p}}}o.add(1,"day")}};if(t&&m&&0==y.length)for(var z in P=function(e){var t={sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday"},a={};for(var i in e)a[t[i]]=e[i];return a}(m),t){var q=t[z].machine_id,W=t[z].averageThroughput,O=t[z].lastTara,R=t[z].maxNetto;0!=W&&B((R-O)/W,q)}return(0,n.jsxs)("div",{id:"storage-system",className:"mt-5",children:[(0,n.jsx)("span",{className:"text-xs uppercase font-bold text-gray-500",children:"Lagersysteme"}),(0,n.jsx)("div",{className:"sm:rounded-lg shadow-md border overflow-auto",children:(0,n.jsxs)("div",{className:"sm:rounded-lg shadow-md border overflow-auto",children:[(0,n.jsxs)("table",{className:"flex-row w-full table-auto",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-xs text-gray-500 border-b text-left",children:[(0,n.jsxs)("th",{className:"font-normal",children:["Masch.-ID",(0,n.jsx)("br",{}),"Max Netto"]}),(0,n.jsx)("th",{className:"font-normal",children:"Material"}),(0,n.jsx)("th",{className:"font-normal",children:"F\xfcllgrad"}),(0,n.jsxs)("th",{className:"font-normal",children:["Plandatum",(0,n.jsx)("br",{}),"Abholdatum"]}),(0,n.jsx)("th",{className:"font-normal",children:"Netto (kg)"})]})}),(0,n.jsx)("tbody",{className:"bg-gray-50",children:t?t.map((function(e){return(0,n.jsxs)("tr",{className:"text-xs border-t",children:[(0,n.jsxs)("td",{children:[e.machineType,": ",(0,n.jsx)("span",{className:"underline",children:(0,n.jsx)(d(),{href:"/machines/"+e.machine_id,children:e.machine_id})}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:e.maxNetto})]}),(0,n.jsx)("td",{children:e.waretype}),(0,n.jsxs)("td",{className:"flex",children:[(0,n.jsx)("div",{className:"border border-black bg-white w-32 mr-1.5",children:(0,n.jsx)("div",{className:100*(e.lastIndicate-e.lastTara)/e.maxNetto>0?(0,o.default)(100*(e.lastIndicate-e.lastTara)/e.maxNetto):0})}),parseInt((100*(e.lastIndicate-e.lastTara)/e.maxNetto).toFixed(0))>0?(100*(e.lastIndicate-e.lastTara)/e.maxNetto).toFixed(0):0,"%"]}),(0,n.jsx)("td",{children:(0,n.jsxs)("span",{children:[0!=e.total_working_time&&y&&0!=y.filter((function(t){return t.machineID===e.machine_id})).length?y.filter((function(t){return t.machineID===e.machine_id})).map((function(e){return(0,n.jsx)("a",{children:e.taskEnd.format("DD.MM.YYYY HH:mm")},e.machineID)})):"-",(0,n.jsx)("br",{}),(0,n.jsxs)("a",{className:0!=e.total_working_time?"underline cursor-pointer flex":"underline pointer-events-none flex",onClick:function(){x(e.machine_id),t&&""!=t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?v(f()(t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date)):k&&v(k.filter((function(t){return t.machineID===e.machine_id}))[0].taskEnd),C(t.filter((function(t){return t.machine_id==e.machine_id}))[0].isDateConfirmed),Z(t.filter((function(t){return t.machine_id==e.machine_id}))[0].isDateConfirmed)},children:[I&&0!=I.filter((function(t){return t.machine_id==e.machine_id})).length?f()(I.filter((function(t){return t.machine_id==e.machine_id}))[0].date).format("DD.MM.YYYY HH:mm"):0!=e.total_working_time&&k&&0!=k.length&&""==t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?k.filter((function(t){return t.machineID===e.machine_id})).map((function(e){return(0,n.jsx)("span",{children:e.taskEnd.format("DD.MM.YYYY HH:mm")},e.machineID)})):0!=e.total_working_time&&""!=t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?f()(t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date).format("DD.MM.yyyy HH:mm"):"-",0!=A.filter((function(t){return t.machine_id==e.machine_id})).length&&0==A.filter((function(t){return t.machine_id==e.machine_id})).date_confirmed||0!=e.total_working_time&&0==e.isDateConfirmed?(0,n.jsx)("img",{className:"ml-1",src:"/icon_fragezeichen 1.svg"}):"",0!=A.filter((function(t){return t.machine_id==e.machine_id})).length&&1==A.filter((function(t){return t.machine_id==e.machine_id})).date_confirmed?(0,n.jsx)("img",{className:"ml-1",src:"/icon_fragezeichen 1.svg"}):0!=e.total_working_time&&1==e.isDateConfirmed?(0,n.jsx)("img",{className:"ml-1",src:"/icon_haken 1.svg"}):""]})]})}),(0,n.jsx)("td",{children:e.maxNetto})]},e.machine_id)})):""})]}),(0,n.jsx)(l.default,{machineID:g,pickupDate:b,setMachineID:x,setPickupDate:v,setPickupDates:w,pickupDates:k,machinesData:t,isDateConfirmed:D,setIsDateConfirmed:C,setNewPickupDates:M,newPickupDates:I,areDatesConfirmed:A,setAreDatesConfirmed:Y,radioConfirmed:H,setRadioConfirmed:Z})]})})]})}},8698:function(){},943:function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}a.d(t,{Z:function(){return i}})},3375:function(e,t,a){"use strict";function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a.d(t,{Z:function(){return i}})},828:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(3375);var n=a(1566);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,i.Z)(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var i=a(943);function n(e,t){if(e){if("string"===typeof e)return(0,i.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,i.Z)(e,t):void 0}}}}]);