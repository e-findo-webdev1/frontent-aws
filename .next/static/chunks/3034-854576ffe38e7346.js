(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3034],{1261:function(e,t,a){"use strict";a.r(t);t.default=function(e){var t="w-0",a="bg-green-600";return 0==e&&(t="w-0"),e>0&&e<10&&(t="w-3"),e>=10&&e<25&&(t="w-1/5"),e>=25&&e<50&&(t="w-1/4"),e>=50&&e<75&&(t="w-1/2"),e>=75&&e<100&&(t="w-3/4",a="bg-red-600"),100==e&&(t="w-full"),"h-full "+t+" "+a}},1081:function(e,t,a){"use strict";a.r(t);var i=a(5893),r=a(9198),n=a.n(r),s=a(381),d=a.n(s),c=a(6154),m=a(7294);t.default=function(e){var t=e.machineID,a=e.pickupDate,r=(e.setPickupDates,e.setMachineID),s=e.setPickupDate,o=(e.pickupDates,e.machinesData),f=e.areDatesConfirmed,l=e.setAreDatesConfirmed,u=e.setNewPickupDates,h=e.newPickupDates,x=e.radioConfirmed,g=e.setRadioConfirmed,p=(0,m.useState)(),y=(p[0],p[1],function(e){var a=o.filter((function(e){return e.machine_id==t}))[0],i={machine_id:a.machine_id,machineType:a.machineType,machineName:a.machineName,group:a.group,waretype:a.waretype,quality:a.quality,index:a.index,maxNetto:a.maxNetto,minContainer:a.minContainer,maxContainer:a.maxContainer,averageThroughput:a.averageThroughput,manualTara:a.manualTara,minForFullStart:a.minForFullStart,newFT111:a.newFT111,automaticTara:a.automaticTara,fillingType:a.fillingType,plandateCalculation:a.plandateCalculation,status:a.status,client:a.client,total_working_time:a.total_working_time,total_working_weight:a.total_working_weight,pickup_date:e.format("YYYY-MM-DD HH:mm"),isDateConfirmed:x,lastIndicate:a.lastIndicate,lastTara:a.lastTara},n=h.filter((function(e){return e.machine_id!=t}));n.push([{machine_id:t,date:e.format("YYYY-MM-DD HH:mm")}]),u(n.flat());var d,m=f.filter((function(e){return e.machine_id!=t}));m.push([{machine_id:t,date_confirmed:x}]),l(m.flat()),d=i,c.Z.put("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/machines",d).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),r(""),s(""),g("")});return(0,i.jsxs)("div",{id:"popup",className:""!=t?"text-sm bg-white w-1/3 sm:rounded-lg shadow-md border p-5 space-y-4 fixed -mt-64 left-0 right-0 m-auto":"hidden",children:[(0,i.jsxs)("p",{children:["Abholdatum bearbeiten (Masch.-ID: ",t,")"]}),(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("p",{className:"m-auto",children:"Abholdatum:"}),(0,i.jsx)(n(),{className:"shadow-md border text-center p-0.5",selected:a&&""!=a?d()(a).toDate():"",showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeFormat:"HH:mm",onChange:function(e){return s(d()(e))}}),(0,i.jsxs)("div",{className:"m-auto",children:["(",function(){if(a&&""!=a)return{0:"Montag",1:"Dienstag",2:"Mittwoch",3:"Donnerstag",4:"Freitag",5:"Samstag",6:"Sonntag"}[d()(a).day()]}(),")"]})]})}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"radio-1",type:"radio",value:"",name:"default-radio",checked:!(!o||0!=x),onChange:function(){g(!1)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,i.jsxs)("label",{htmlFor:"radio-1",className:"flex ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:[(0,i.jsx)("img",{src:"/icon_fragezeichen 1.svg"}),"Angefragt"]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"radio-2",type:"radio",value:"",name:"default-radio",checked:!(!o||1!=x),onChange:function(){g(!0)},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,i.jsxs)("label",{htmlFor:"radio-2",className:"flex ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:[(0,i.jsx)("img",{src:"/icon_haken 1.svg"}),"Best\xe4tigt"]})]})]}),(0,i.jsxs)("div",{id:"popup-buttons",className:"space-x-5",children:[(0,i.jsx)("button",{className:"sm:rounded-lg shadow-md border p-1",onClick:function(){y(a)},children:"Speichern"}),(0,i.jsx)("button",{className:"sm:rounded-lg shadow-md border p-1",onClick:function(){r(""),s(""),g("")},children:"Abbrechen"})]})]})}},3034:function(e,t,a){"use strict";a.r(t);var i=a(828),r=a(5893),n=a(7294),s=a(1664),d=a.n(s),c=a(1261),m=a(6154),o=a(381),f=a.n(o),l=a(1081);a(8698);t.default=function(){var e=(0,n.useState)(),t=e[0],a=e[1],s=(0,n.useState)(),o=s[0],u=s[1],h=(0,n.useState)(""),x=h[0],g=h[1],p=(0,n.useState)([]),y=p[0],_=p[1],T=(0,n.useState)(""),b=T[0],j=T[1],v=(0,n.useState)([]),k=v[0],w=v[1],N=(0,n.useState)(""),D=N[0],C=N[1],I=(0,n.useState)([]),S=I[0],M=I[1],L=(0,n.useState)([]),A=L[0],Y=L[1],F=(0,n.useState)(""),H=F[0],Z=F[1];(0,n.useEffect)((function(){m.Z.get("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/machines").then((function(e){a(e.data.Items.filter((function(e){return"e-findo GmbH"==e.client})))})).catch((function(e){console.log(e)})),m.Z.get("https://8v9jqts989.execute-api.eu-central-1.amazonaws.com/shifts").then((function(e){u(e.data.Items.filter((function(e){return 1e4==e.shift_id}))[0].shifts)})).catch((function(e){console.log(e.response)}))}),[]);var P={Sunday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Monday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Tuesday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Wednesday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Thursday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Friday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}},Saturday:{shift1:{startTime:"",endTime:""},shift2:{startTime:"",endTime:""},shift3:{startTime:"",endTime:""},shift4:{startTime:"",endTime:""}}},z={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},E=function(e,t){for(var a=60*e,r=f()(),n=(0,i.Z)(function(e){for(var t=f()(e.format("L")),a=0;a<7;a++){var i=P[z[t.day()]];if(""!=i.shift1.start){var r=i.shift1.start,n=i.shift1.end,s=f()(t.format("L")+" "+r),d=f()(t.format("L")+" "+n);if(d.isBefore(s)&&d.add(1,"day"),d.isAfter(e))return[i.shift1,t.format("L")]}if(""!=i.shift2.start){var c=i.shift2.start,m=i.shift2.end,o=f()(t.format("L")+" "+c),l=f()(t.format("L")+" "+m);if(l.isBefore(o)&&l.add(1,"day"),l.isAfter(e))return[i.shift2,t.format("L")]}if(""!=i.shift3.start){var u=i.shift3.start,h=i.shift3.end,x=f()(t.format("L")+" "+u),g=f()(t.format("L")+" "+h);if(g.isBefore(x)&&g.add(1,"day"),g.isAfter(e))return[i.shift3,t.format("L")]}if(""!=i.shift4.start){var p=i.shift4.start,y=i.shift4.end,_=f()(t.format("L")+" "+p),T=f()(t.format("L")+" "+y);if(T.isBefore(_)&&T.add(1,"day"),T.isAfter(e))return[i.shift4,t.format("L")]}t.add(1,"day")}}(r),2),s=n[0],d=n[1],c=f()(r.format("L"));a>0;)for(var m in P)if(m==z[c.day()]){for(var o=P[z[c.day()]],l=1;l<5;l++){var u="shift"+l;if(""!=o[u].start){var h=f()(c.format("L")+" "+o[u].start),x=f()(c.format("L")+" "+o[u].end);if(x.isBefore(h)&&x.add(1,"day"),h.isAfter(f()(d+" "+s.start))&&(r=h),(r.format("LLL")==h.format("LLL")||r.isAfter(h))&&r.isBefore(x)){var g=r.clone();g.add(a,"minutes");var p=x.diff(r)/36e5*60;if(g.diff(r)/36e5*60<=p){var T=y;return T.push([{machineID:t,taskEnd:g}]),_(T.flat()),w(T.flat()),g}a-=p}}}c.add(1,"day")}};if(t&&o&&0==y.length)for(var B in P=function(e){var t={sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday"},a={};for(var i in e)a[t[i]]=e[i];return a}(o),t){var q=t[B].machine_id,J=t[B].averageThroughput,O=t[B].lastTara,W=t[B].maxNetto;0!=J&&E((W-O)/J,q)}var R={0:"Januar",1:"Februar",2:"M\xe4rz",3:"April",4:"Mai",5:"Juni",6:"Juli",7:"August",8:"September",9:"Oktober",10:"November",11:"Dezember"};return(0,r.jsxs)("div",{id:"storage-system",className:"mt-5",children:[(0,r.jsx)("span",{className:"text-xs uppercase font-bold text-gray-500",children:"Lagersysteme"}),(0,r.jsx)("div",{className:"sm:rounded-lg shadow-md border overflow-auto w-2/3",children:(0,r.jsxs)("div",{className:"sm:rounded-lg shadow-md border overflow-auto",children:[(0,r.jsxs)("table",{className:"flex-row table-auto w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-xs text-gray-500 border-b text-left",children:[(0,r.jsxs)("th",{className:"font-normal",children:["Masch.-ID",(0,r.jsx)("br",{}),"Max Netto"]}),(0,r.jsx)("th",{className:"font-normal",children:"Material"}),(0,r.jsx)("th",{className:"font-normal",children:"F\xfcllgrad"}),(0,r.jsxs)("th",{className:"font-normal",children:["Plandatum",(0,r.jsx)("br",{}),"Abholdatum"]}),(0,r.jsx)("th",{className:"font-normal",children:"Netto (kg)"})]})}),(0,r.jsx)("tbody",{className:"bg-gray-50",children:t?t.sort((function(e,t){return e.machine_id-t.machine_id})).map((function(e){return(0,r.jsxs)("tr",{className:"text-xs border-t",children:[(0,r.jsxs)("td",{children:[e.machineType,": ",(0,r.jsx)("span",{className:"underline",children:(0,r.jsx)(d(),{href:"/machines/"+e.machine_id,children:e.machine_id})}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:e.maxNetto})]}),(0,r.jsx)("td",{children:e.waretype}),(0,r.jsxs)("td",{className:"flex",children:[(0,r.jsx)("div",{className:"border border-black bg-white w-32 mr-1.5",children:(0,r.jsx)("div",{className:100*e.lastIndicate/e.maxNetto>0?(0,c.default)(100*e.lastIndicate/e.maxNetto):0})}),parseInt((100*e.lastIndicate/e.maxNetto).toFixed(0))>0?(100*e.lastIndicate/e.maxNetto).toFixed(0):0,"%"]}),(0,r.jsx)("td",{children:(0,r.jsxs)("span",{children:[0!=e.total_working_time&&y&&0!=y.filter((function(t){return t.machineID===e.machine_id})).length?y.filter((function(t){return t.machineID===e.machine_id})).map((function(e){return(0,r.jsx)("a",{children:e.taskEnd.format("DD.MM.YYYY HH:mm")},e.machineID)})):"-",(0,r.jsx)("br",{}),(0,r.jsxs)("a",{className:0!=e.total_working_time?"underline cursor-pointer flex":"underline pointer-events-none flex",onClick:function(){g(e.machine_id),t&&""!=t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?j(f()(t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date)):k&&j(k.filter((function(t){return t.machineID===e.machine_id}))[0].taskEnd),C(t.filter((function(t){return t.machine_id==e.machine_id}))[0].isDateConfirmed),Z(t.filter((function(t){return t.machine_id==e.machine_id}))[0].isDateConfirmed)},children:[S&&0!=S.filter((function(t){return t.machine_id==e.machine_id})).length?f()(S.filter((function(t){return t.machine_id==e.machine_id}))[0].date).format("DD.MM.YYYY HH:mm"):0!=e.total_working_time&&k&&0!=k.length&&""==t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?k.filter((function(t){return t.machineID===e.machine_id})).map((function(e){return(0,r.jsx)("span",{children:e.taskEnd.format("DD.MM.YYYY HH:mm")},e.machineID)})):0!=e.total_working_time&&""!=t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date?f()(t.filter((function(t){return t.machine_id==e.machine_id}))[0].pickup_date).format("DD.MM.yyyy HH:mm"):"-",0!=A.filter((function(t){return t.machine_id==e.machine_id})).length&&0==A.filter((function(t){return t.machine_id==e.machine_id})).date_confirmed||0!=e.total_working_time&&0==e.isDateConfirmed?(0,r.jsx)("img",{className:"ml-1",src:"/icon_fragezeichen 1.svg"}):"",0!=A.filter((function(t){return t.machine_id==e.machine_id})).length&&1==A.filter((function(t){return t.machine_id==e.machine_id})).date_confirmed?(0,r.jsx)("img",{className:"ml-1",src:"/icon_fragezeichen 1.svg"}):0!=e.total_working_time&&1==e.isDateConfirmed?(0,r.jsx)("img",{className:"ml-1",src:"/icon_haken 1.svg"}):""]})]})}),(0,r.jsxs)("td",{children:[e.lastIndicate," kg"]}),(0,r.jsx)("td",{className:"text-right",children:(0,r.jsx)(d(),{href:"/master-data/price-list/"+e.machine_id,children:(0,r.jsxs)("button",{className:"underline",children:[e.price_list?e.price_list.prices[f()().year()][R[f()().month()]]:"0,00"," \u20ac"]})})}),(0,r.jsxs)("td",{className:"text-right",children:[e.price_list?(e.lastIndicate*parseInt(e.price_list.prices[f()().year()][R[f()().month()]])/1e3).toFixed(2).replace(".",","):"0,00"," \u20ac"]})]},e.machine_id)})):""})]}),(0,r.jsx)(l.default,{machineID:x,pickupDate:b,setMachineID:g,setPickupDate:j,setPickupDates:w,pickupDates:k,machinesData:t,isDateConfirmed:D,setIsDateConfirmed:C,setNewPickupDates:M,newPickupDates:S,areDatesConfirmed:A,setAreDatesConfirmed:Y,radioConfirmed:H,setRadioConfirmed:Z})]})})]})}},8698:function(){},943:function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}a.d(t,{Z:function(){return i}})},3375:function(e,t,a){"use strict";function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a.d(t,{Z:function(){return i}})},828:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var i=a(3375);var r=a(1566);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,i.Z)(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(943);function r(e,t){if(e){if("string"===typeof e)return(0,i.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,i.Z)(e,t):void 0}}}}]);